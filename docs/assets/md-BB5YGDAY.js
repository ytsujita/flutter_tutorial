import{o as u,c as r,k as c,e,B as l,s as i,t as s,A as t}from"./modules/vue-FURrN97m.js";import{_ as a}from"./default-CKydmwFh.js";import{u as m,f as p}from"./slidev/context-CKaQpQVt.js";import"./index-BRSB-Ac2.js";import"./modules/shiki-DUnWAZqI.js";const C={__name:"slides.md__slidev_73",setup(_){const{$slidev:f,$nav:g,$clicksContext:o,$clicks:x,$page:$,$renderContext:b,$frontmatter:d}=m();return o.setup(),(E,n)=>(u(),r(a,i(s(t(p)(t(d),72))),{default:c(()=>n[0]||(n[0]=[e("h3",null,"具体的な描画の仕組み",-1),e("p",null,[l("前述した通り"),e("code",null,"Widget"),l("は所詮設定を持つ程度であるため、実は"),e("code",null,"Widget"),l("そのものの再構築はたいしたコストになりません。"),e("br"),l(" 一番コストになるのは"),e("code",null,"Element"),l("の再構築です。")],-1),e("p",null,[l("これは"),e("code",null,"Element"),l("が実際に状態を管理していたり、"),e("code",null,"Widget"),l("や"),e("code",null,"RenderObject"),l("も管理していたりと、"),e("br"),l(" 様々な役割を持つオブジェクトであるためです。")],-1),e("p",null,[l("つまり、パフォーマンスの最適化のためには"),e("span",{style:{"text-decoration-line":"underline","text-decoration-color":"cyan"}},[e("code",null,"Element"),l("の再構築を最小限に抑える")]),l("ことが重要となります。")],-1),e("p",null,"以下は更新時の挙動です。これを念頭に置いて、次頁でパフォーマンス改善方法の意味を考えましょう。",-1),e("ol",null,[e("li",null,[e("code",null,"Element"),l("は"),e("code",null,"StateObject"),l("に変化があるとdirtyとしてマークする")]),e("li",null,[l("マークされた箇所は次フレームで"),e("code",null,"Widget"),l("の"),e("code",null,"build"),l("を呼び出し、"),e("code",null,"Widget"),l("ツリーを再構築する")]),e("li",null,[l("最新の"),e("code",null,"Widget"),l("ツリーのそれぞれの"),e("code",null,"Widget"),l("で、"),e("strong",null,"位置・runtimeType・keyを比較"),l("して、同一のものかどうかを判断する")]),e("li",null,[l("同一であれば対応する"),e("code",null,"Element"),l("は使いまわし、異なれば新しい"),e("code",null,"Element"),l("を生成する"),e("br"),l(" ("),e("code",null,"Element"),l("が新しくなったとき、"),e("code",null,"RenderObject"),l("も新しく生成される)")])],-1)])),_:1},16))}};export{C as default};
