import{o as s,c,k as a,e,B as o,q as u,s as d,A as n}from"./modules/vue-B94B7V6J.js";import{_ as i}from"./default-b0m56UWc.js";import{u as p,f as y}from"./slidev/context-DV-y_y6P.js";import"./index-DfJMBkQj.js";import"./modules/shiki-BpXW-QtO.js";const f={__name:"slides.md__slidev_26",setup(m){const{$slidev:A,$nav:_,$clicksContext:t,$clicks:v,$page:x,$renderContext:g,$frontmatter:r}=p();return t.setup(),($,l)=>(s(),c(i,u(d(n(y)(n(r),25))),{default:a(()=>l[0]||(l[0]=[e("h3",null,"プロバイダーの種類：AsyncNotifierProvider (AsyncValueについて)",-1),e("p",null,[o("ほとんどの場合、"),e("code",null,"FutureProvider"),o("で紹介したときの条件分岐ができていれば十分だと思いますが、"),e("br"),o(" ひとつ注意点があります。")],-1),e("p",null,[e("code",null,"state = AsyncLoading<T>().copyWithPrevious(state, isRefresh: false);"),o("とすると、前回の値やエラーが保持されることには変わりませんが、 クラスが"),e("code",null,"AsyncData"),o("や"),e("code",null,"AsyncError"),o("ではなく、"),e("code",null,"AsyncLoading"),o("になることに注意してください。"),e("br"),e("span",{style:{"font-size":"0.8em",opacity:"0.8"}},[e("code",null,"state = copyWithPrevious(state);"),o("とすると"),e("code",null,"AsyncData"),o("か"),e("code",null,"AsyncError"),o("の"),e("code",null,"isLoading"),o("が"),e("code",null,"true"),o("になるだけで、"),e("code",null,"AsyncLoading"),o("にはならない。")])],-1),e("p",null,[o("これは、リフレッシュではない（同じ条件での取得でない）と指定していることになっており、 新しい条件で新しい値を取得しようとしているので、"),e("span",{style:{"text-decoration-line":"underline","text-decoration-color":"cyan"}},[o("初回取得("),e("code",null,"AsyncLoading"),o(")であるように扱われています")]),o("。 前回の値は"),e("code",null,"AsyncLoading"),o("の"),e("code",null,"value"),o("に保持されています。")],-1),e("p",null,"この挙動はページングのような次のデータを取得する（条件は変わるが前回の値は使う）といった事例で有用です。",-1),e("p",null,[e("code",null,"isRefresh"),o("を"),e("code",null,"true"),o("のまま"),e("code",null,"copyWithPrevious"),o("で上書きしても保持しているデータが同じだからといって、"),e("br"),e("span",{style:{"text-decoration-line":"underline","text-decoration-color":"red"}},"雑に全てリフレッシュ扱いとすると、UIとの齟齬が生まれるので複数人で開発するときは特に注意してください。")],-1),e("div",{style:{"font-size":"0.8em",opacity:"0.8"}},[e("p",null,[e("code",null,"AsyncValue"),o("では、"),e("br"),o(" クラスが"),e("code",null,"AsyncData"),o("(or "),e("code",null,"AsyncError"),o(")で"),e("code",null,"isLoading"),o("が"),e("code",null,"true"),o("のときをリフレッシュと呼び、"),e("br"),o(" クラスが"),e("code",null,"AsyncLoading"),o("で"),e("code",null,"value"),o("(or "),e("code",null,"error"),o(")を保持しているときをリロードと呼んでいます。")])],-1)])),_:1},16))}},B=f;export{B as default};
