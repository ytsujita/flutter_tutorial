import{o as u,c,k as r,e,B as l,q as s,s as i,A as t}from"./modules/vue-B94B7V6J.js";import{_ as a}from"./default-b0m56UWc.js";import{u as m,f as p}from"./slidev/context-DV-y_y6P.js";import"./index-DfJMBkQj.js";import"./modules/shiki-BpXW-QtO.js";const _={__name:"slides.md__slidev_73",setup(f){const{$slidev:g,$nav:x,$clicksContext:o,$clicks:$,$page:b,$renderContext:E,$frontmatter:d}=m();return o.setup(),(W,n)=>(u(),c(a,s(i(t(p)(t(d),72))),{default:r(()=>n[0]||(n[0]=[e("h3",null,"具体的な描画の仕組み",-1),e("p",null,[l("前述した通り"),e("code",null,"Widget"),l("は所詮設定を持つ程度であるため、実は"),e("code",null,"Widget"),l("そのものの再構築はたいしたコストになりません。"),e("br"),l(" 一番コストになるのは"),e("code",null,"Element"),l("の再構築です。")],-1),e("p",null,[l("これは"),e("code",null,"Element"),l("が実際に状態を管理していたり、"),e("code",null,"Widget"),l("や"),e("code",null,"RenderObject"),l("も管理していたりと、"),e("br"),l(" 様々な役割を持つオブジェクトであるためです。")],-1),e("p",null,[l("つまり、パフォーマンスの最適化のためには"),e("span",{style:{"text-decoration-line":"underline","text-decoration-color":"cyan"}},[e("code",null,"Element"),l("の再構築を最小限に抑える")]),l("ことが重要となります。")],-1),e("p",null,"以下は更新時の挙動です。これを念頭に置いて、次頁でパフォーマンス改善方法の意味を考えましょう。",-1),e("ol",null,[e("li",null,[e("code",null,"Element"),l("は"),e("code",null,"StateObject"),l("に変化があるとdirtyとしてマークする")]),e("li",null,[l("マークされた箇所は次フレームで"),e("code",null,"Widget"),l("の"),e("code",null,"build"),l("を呼び出し、"),e("code",null,"Widget"),l("ツリーを再構築する")]),e("li",null,[l("最新の"),e("code",null,"Widget"),l("ツリーのそれぞれの"),e("code",null,"Widget"),l("で、"),e("strong",null,"位置・runtimeType・keyを比較"),l("して、同一のものかどうかを判断する")]),e("li",null,[l("同一であれば対応する"),e("code",null,"Element"),l("は使いまわし、異なれば新しい"),e("code",null,"Element"),l("を生成する"),e("br"),l(" ("),e("code",null,"Element"),l("が新しくなったとき、"),e("code",null,"RenderObject"),l("も新しく生成される)")])],-1)])),_:1},16))}},j=_;export{j as default};
